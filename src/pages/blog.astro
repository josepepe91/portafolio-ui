---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/Header.astro";
import PostPreview from "../components/PostPreview.astro";
const allPosts = await Astro.glob("../pages/posts/*.md");
const pageTitle = "Blog";
const dateOptions: object = {
  year: "numeric",
  month: "long",
  day: "numeric",
};
---

<BaseLayout pageTitle={pageTitle}>
  <Header pageTitle={pageTitle} />
  <section class="blog">
    {
      allPosts.map((post) => (
        <a class="post-preview-container" href={post.url}>
          <PostPreview
            title={post.frontmatter.title}
            date={
              post.frontmatter.pubDate
                ? new Date(post.frontmatter.pubDate).toLocaleDateString(
                    "en-US",
                    dateOptions
                  )
                : null
            }
            imgSrc={post.frontmatter.image?.url}
          >
            {post.frontmatter.description}
          </PostPreview>
        </a>
      ))
    }
  </section>
</BaseLayout>

<style>
  .blog {
    @apply grid gap-5 gap-y-10;
    @apply sm:grid-cols-2;
    @apply md:grid-cols-3;
  }
</style>
